{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 3, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 61, "column": 0}, "map": {"version":3,"sources":["file:///home/thr00n3r/Documents/CodingProject/JHIC-2025/Booking-Infra_Competition/src/lib/prisma.ts"],"sourcesContent":["import { PrismaClient } from '@prisma/client'\n\nconst globalForPrisma = globalThis as unknown as {\n  prisma: PrismaClient | undefined\n}\n\nexport const prisma = globalForPrisma.prisma ?? new PrismaClient()\n\nif (process.env.NODE_ENV !== 'production') globalForPrisma.prisma = prisma\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,kBAAkB;AAIjB,MAAM,SAAS,gBAAgB,MAAM,IAAI,IAAI,6IAAY;AAEhE,wCAA2C,gBAAgB,MAAM,GAAG","debugId":null}},
    {"offset": {"line": 74, "column": 0}, "map": {"version":3,"sources":["file:///home/thr00n3r/Documents/CodingProject/JHIC-2025/Booking-Infra_Competition/src/app/api/events/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\";\nimport { prisma } from \"@/lib/prisma\";\nimport { Prisma, BookingStatus } from \"@prisma/client\";\n\nexport async function GET(request: Request) {\n  try {\n    const { searchParams } = new URL(request.url);\n    const page = parseInt(searchParams.get(\"page\") || \"1\");\n    const limit = parseInt(searchParams.get(\"limit\") || \"10\");\n    const facilityId = searchParams.get(\"facilityId\");\n    const statusParam = searchParams.get(\"status\") || \"APPROVED\";\n    \n    const skip = (page - 1) * limit;\n\n    // Build where clause\n    const where: Prisma.BookingWhereInput = {\n      status: statusParam as BookingStatus,\n    };\n\n    if (facilityId) {\n      where.facilityId = facilityId;\n    }\n\n    // Get total count\n    const total = await prisma.booking.count({ where });\n\n    // Get bookings with pagination\n    const bookings = await prisma.booking.findMany({\n      where,\n      include: {\n        facility: {\n          select: {\n            id: true,\n            name: true,\n          },\n        },\n        user: {\n          select: {\n            name: true,\n            email: true,\n          },\n        },\n      },\n      orderBy: {\n        startDate: \"asc\",\n      },\n      skip,\n      take: limit,\n    });\n\n    // Transform bookings to events format\n    const events = bookings.map((booking) => ({\n      id: booking.id,\n      title: booking.title || `${booking.facility.name} Booking`,\n      startDate: booking.startDate.toISOString(),\n      endDate: booking.endDate.toISOString(),\n      facility: booking.facility.name,\n      facilityId: booking.facility.id,\n      organizer: booking.user.name || booking.user.email,\n      status: booking.status,\n    }));\n\n    return NextResponse.json({\n      success: true,\n      data: events,\n      pagination: {\n        page,\n        limit,\n        total,\n        totalPages: Math.ceil(total / limit),\n      },\n    });\n  } catch (error) {\n    console.error(\"Error fetching events:\", error);\n    return NextResponse.json(\n      { success: false, error: \"Failed to fetch events\" },\n      { status: 500 }\n    );\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAGO,eAAe,IAAI,OAAgB;IACxC,IAAI;QACF,MAAM,EAAE,YAAY,EAAE,GAAG,IAAI,IAAI,QAAQ,GAAG;QAC5C,MAAM,OAAO,SAAS,aAAa,GAAG,CAAC,WAAW;QAClD,MAAM,QAAQ,SAAS,aAAa,GAAG,CAAC,YAAY;QACpD,MAAM,aAAa,aAAa,GAAG,CAAC;QACpC,MAAM,cAAc,aAAa,GAAG,CAAC,aAAa;QAElD,MAAM,OAAO,CAAC,OAAO,CAAC,IAAI;QAE1B,qBAAqB;QACrB,MAAM,QAAkC;YACtC,QAAQ;QACV;QAEA,IAAI,YAAY;YACd,MAAM,UAAU,GAAG;QACrB;QAEA,kBAAkB;QAClB,MAAM,QAAQ,MAAM,8MAAM,CAAC,OAAO,CAAC,KAAK,CAAC;YAAE;QAAM;QAEjD,+BAA+B;QAC/B,MAAM,WAAW,MAAM,8MAAM,CAAC,OAAO,CAAC,QAAQ,CAAC;YAC7C;YACA,SAAS;gBACP,UAAU;oBACR,QAAQ;wBACN,IAAI;wBACJ,MAAM;oBACR;gBACF;gBACA,MAAM;oBACJ,QAAQ;wBACN,MAAM;wBACN,OAAO;oBACT;gBACF;YACF;YACA,SAAS;gBACP,WAAW;YACb;YACA;YACA,MAAM;QACR;QAEA,sCAAsC;QACtC,MAAM,SAAS,SAAS,GAAG,CAAC,CAAC,UAAY,CAAC;gBACxC,IAAI,QAAQ,EAAE;gBACd,OAAO,QAAQ,KAAK,IAAI,GAAG,QAAQ,QAAQ,CAAC,IAAI,CAAC,QAAQ,CAAC;gBAC1D,WAAW,QAAQ,SAAS,CAAC,WAAW;gBACxC,SAAS,QAAQ,OAAO,CAAC,WAAW;gBACpC,UAAU,QAAQ,QAAQ,CAAC,IAAI;gBAC/B,YAAY,QAAQ,QAAQ,CAAC,EAAE;gBAC/B,WAAW,QAAQ,IAAI,CAAC,IAAI,IAAI,QAAQ,IAAI,CAAC,KAAK;gBAClD,QAAQ,QAAQ,MAAM;YACxB,CAAC;QAED,OAAO,8NAAY,CAAC,IAAI,CAAC;YACvB,SAAS;YACT,MAAM;YACN,YAAY;gBACV;gBACA;gBACA;gBACA,YAAY,KAAK,IAAI,CAAC,QAAQ;YAChC;QACF;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,0BAA0B;QACxC,OAAO,8NAAY,CAAC,IAAI,CACtB;YAAE,SAAS;YAAO,OAAO;QAAyB,GAClD;YAAE,QAAQ;QAAI;IAElB;AACF","debugId":null}}]
}